<!DOCTYPE html>
<html>
<head>
    <title>Convoys | Home </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel='stylesheet' href='/stylesheets/bootstrap-social-5.1.1.min.css'/>
    <link rel='stylesheet' href='/stylesheets/custom-bootstrap.css'/>
    <link rel='stylesheet' href='/stylesheets/style.css'/>
</head>
<body>

<%- include ../partials/header.ejs %>
<div class="container-fluid">
    <div id="map"></div>
</div>

<%- include ../partials/footer.ejs %>

<script src="/js/loader.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/ajaxCalls.js"></script>
<script type="application/javascript">
    const gInterface = {
        initMap: function () {
            ajaxCalls.getCities().then(data => {
                let arrayData = [['Country', 'Population']];
                data.forEach(item => {
                    arrayData.push(
                        [item.country, "Population: " + item.population]);
                });

                google.charts.load('current', {'packages': ['map']});
                google.charts.setOnLoadCallback(drawMap);

                function drawMap() {
                    let data = google.visualization.arrayToDataTable(arrayData);

                    let options = {
                        mapType: 'styledMap',
                        showTooltip: true,
                        showInfoWindow: true,
                        maps: {
                            styledMap: {
                                name: "Styled Map",
                                styles: [
                                    {
                                        "elementType": "geometry",
                                        "stylers": [
                                            {
                                                "color": "#1d2c4d"
                                            }
                                        ]
                                    },
                                    {
                                        "elementType": "labels.text.fill",
                                        "stylers": [
                                            {
                                                "color": "#8ec3b9"
                                            }
                                        ]
                                    },
                                    {
                                        "elementType": "labels.text.stroke",
                                        "stylers": [
                                            {
                                                "color": "#1a3646"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "administrative.country",
                                        "elementType": "geometry.stroke",
                                        "stylers": [
                                            {
                                                "color": "#4b6878"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "administrative.land_parcel",
                                        "elementType": "labels.text.fill",
                                        "stylers": [
                                            {
                                                "color": "#64779e"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "administrative.province",
                                        "elementType": "geometry.stroke",
                                        "stylers": [
                                            {
                                                "color": "#4b6878"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "landscape.man_made",
                                        "elementType": "geometry.stroke",
                                        "stylers": [
                                            {
                                                "color": "#334e87"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "landscape.natural",
                                        "elementType": "geometry",
                                        "stylers": [
                                            {
                                                "color": "#023e58"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "poi",
                                        "elementType": "geometry",
                                        "stylers": [
                                            {
                                                "color": "#283d6a"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "poi",
                                        "elementType": "labels.text.fill",
                                        "stylers": [
                                            {
                                                "color": "#6f9ba5"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "poi",
                                        "elementType": "labels.text.stroke",
                                        "stylers": [
                                            {
                                                "color": "#1d2c4d"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "poi.park",
                                        "elementType": "geometry.fill",
                                        "stylers": [
                                            {
                                                "color": "#023e58"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "poi.park",
                                        "elementType": "labels.text.fill",
                                        "stylers": [
                                            {
                                                "color": "#3C7680"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "road",
                                        "elementType": "geometry",
                                        "stylers": [
                                            {
                                                "color": "#304a7d"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "road",
                                        "elementType": "labels.text.fill",
                                        "stylers": [
                                            {
                                                "color": "#98a5be"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "road",
                                        "elementType": "labels.text.stroke",
                                        "stylers": [
                                            {
                                                "color": "#1d2c4d"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "road.highway",
                                        "elementType": "geometry",
                                        "stylers": [
                                            {
                                                "color": "#2c6675"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "road.highway",
                                        "elementType": "geometry.stroke",
                                        "stylers": [
                                            {
                                                "color": "#255763"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "road.highway",
                                        "elementType": "labels.text.fill",
                                        "stylers": [
                                            {
                                                "color": "#b0d5ce"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "road.highway",
                                        "elementType": "labels.text.stroke",
                                        "stylers": [
                                            {
                                                "color": "#023e58"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "transit",
                                        "elementType": "labels.text.fill",
                                        "stylers": [
                                            {
                                                "color": "#98a5be"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "transit",
                                        "elementType": "labels.text.stroke",
                                        "stylers": [
                                            {
                                                "color": "#1d2c4d"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "transit.line",
                                        "elementType": "geometry.fill",
                                        "stylers": [
                                            {
                                                "color": "#283d6a"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "transit.station",
                                        "elementType": "geometry",
                                        "stylers": [
                                            {
                                                "color": "#3a4762"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "water",
                                        "elementType": "geometry",
                                        "stylers": [
                                            {
                                                "color": "#0e1626"
                                            }
                                        ]
                                    },
                                    {
                                        "featureType": "water",
                                        "elementType": "labels.text.fill",
                                        "stylers": [
                                            {
                                                "color": "#4e6d70"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    };

                    let map = new google.visualization.Map(document.getElementById('map'));

                    map.draw(data, options);
                }
            });
        },
        bindEvents: function () {
            let self = this;
        }
    };

    $(document).ready(function () {
        gInterface.bindEvents();
        gInterface.initMap();
    });
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6Kh2SktbSoAyR_8XeVaSqBKo6340URXk"
        type="text/javascript"></script>
<script src="/js/tether.min.js"></script>
<script src="/js/popper-1.12.6.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
</body>
</html>
